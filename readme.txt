STEPS to run the code:

1. create a file named "template-events.php" inside your code editor (PATH: project_file/wp-content/themes/theme_name/template-events.php) and paste the code inside the file.

2. Create a page from the admin and choose the page template as "template-events".

3. Create a plugin folder and inside that folder create a file named "custom-events-plugin.php" inside your code editor (PATH: projects_file/wp-content/plugins/custom-events-plugin/custom-events-plugin.php) and paste the code inside the file.

4. Make sure that your plugin is activated in the Plugins section of the dashboard.

5. Inside functions.php file, paste the code from where the commentted line has been mentioned i.e. "// Events related code:-"

6. You're good to go to launch your page to toggle in between past and upcoming events.

NOTE: POST created from the code should be there inside the admin, You'll be able to locate it inside the side menu section.